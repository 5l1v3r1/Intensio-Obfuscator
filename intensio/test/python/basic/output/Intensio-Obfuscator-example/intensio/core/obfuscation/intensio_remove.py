# -*- coding: utf-8 -*-
import re
import fileinput
import glob
from tqdm import tqdm
from core.utils.intensio_error import nUKxRcTMPJDesumjUAPIMORXiDvlnUVJ, IZxoJjnCzvaNBeGxIUOQAGqgqRGXLwlG
from core.utils.intensio_utils import WspfsbqACjFjNKXwvSgXnHbKNlAGbWWJ
class fGaAEhoBtKsjlWzGRTOnzHeqjUChGWEb:
    def __init__(self):
        self.SGmfKJIYPdAiXpRFRIYwVAVshNVvUjKN = WspfsbqACjFjNKXwvSgXnHbKNlAGbWWJ()
    def mfZkOZLuWJEVMClZlQvMPoireraUJIKy(self, codeArg, outputArg):
        ngJQlKQuFTTVQtBwXHnVqDcnSvTiBQTK       = 0
        QLZYBxpsZCkWkSLkMRMndCdNBleaXjaG     = 0
        moQMyhWNxXcuVgrVUNOIFrMhprCbPkeD  = 0
        if codeArg == "python":
            HElMLRODGzcUKJspthDIppqXbeiaBYrc  = "py"
            KZMnIKVborfggnkNSlyUhxObwRqVmiQC   = r"__pycache__"
        uTWbEuJHoQKKukuwUKwlPkJbhOBZLpjb = [XpFYQbySEDlOOUZqcIJsabBgEtshBdff for XpFYQbySEDlOOUZqcIJsabBgEtshBdff in glob.glob("{0}{1}**{1}*.{2}".format(outputArg, self.SGmfKJIYPdAiXpRFRIYwVAVshNVvUjKN.ghmlWbnPwSwsukFQEkGbUHGEAvsuOsFV(), HElMLRODGzcUKJspthDIppqXbeiaBYrc), recursive=True)]
        for KnxSmCrKKXfIvfuMBuBUnWesjUiLQKjY in uTWbEuJHoQKKukuwUKwlPkJbhOBZLpjb:
            if re.match(KZMnIKVborfggnkNSlyUhxObwRqVmiQC, KnxSmCrKKXfIvfuMBuBUnWesjUiLQKjY):
                continue
            else:
                with fileinput.FileInput(KnxSmCrKKXfIvfuMBuBUnWesjUiLQKjY, inplace=True) as inputFile:
                    for qWTfuqshczFrWrfpEGoHPDXVFTNPlcza in inputFile:
                        if qWTfuqshczFrWrfpEGoHPDXVFTNPlcza.strip():
                            print(qWTfuqshczFrWrfpEGoHPDXVFTNPlcza.rstrip())
        for KnxSmCrKKXfIvfuMBuBUnWesjUiLQKjY in uTWbEuJHoQKKukuwUKwlPkJbhOBZLpjb:
            ngJQlKQuFTTVQtBwXHnVqDcnSvTiBQTK = 0
            if re.match(KZMnIKVborfggnkNSlyUhxObwRqVmiQC, KnxSmCrKKXfIvfuMBuBUnWesjUiLQKjY):
                continue
            else:
                with open(KnxSmCrKKXfIvfuMBuBUnWesjUiLQKjY, "r") as readFile:
                    iDEXUobMjNBqrNlqWoUHoYrsUXidHHKU = readFile.readlines()
                    for tswOsnHvEBcXUpNHApCkrgMsnXiSlXdm in iDEXUobMjNBqrNlqWoUHoYrsUXidHHKU:
                        if tswOsnHvEBcXUpNHApCkrgMsnXiSlXdm == "\n":
                            ngJQlKQuFTTVQtBwXHnVqDcnSvTiBQTK += 1
                        if ngJQlKQuFTTVQtBwXHnVqDcnSvTiBQTK == 0:
                            moQMyhWNxXcuVgrVUNOIFrMhprCbPkeD += 1
                            QLZYBxpsZCkWkSLkMRMndCdNBleaXjaG += 1
                        else:
                            moQMyhWNxXcuVgrVUNOIFrMhprCbPkeD += 0
                            QLZYBxpsZCkWkSLkMRMndCdNBleaXjaG += 1
        if moQMyhWNxXcuVgrVUNOIFrMhprCbPkeD == QLZYBxpsZCkWkSLkMRMndCdNBleaXjaG:
            return nUKxRcTMPJDesumjUAPIMORXiDvlnUVJ
        else:
            return IZxoJjnCzvaNBeGxIUOQAGqgqRGXLwlG
    def BdkkLUuAkhjOFkTBZSSOHbPsKmzfYhvE(self, codeArg, outputArg):
        bjBAnnRTSHHqTghXpTiBerZzUCAUixVn     = 0
        yJULBCuEpZDZOyaWqYXWrxGrGqxgLJQP      = 0
        qUFBuUDAhulkPLEwnUQODBOmGAsjmUWI        = 0
        zlanKAzCAwPSLqQcHViiyGjzjqGApZWR        = 0
        EVpvPsyVTtcJxqekeNdCKdxNsmXmBuks    = 0
        if codeArg == "python":
            VyYrBUnurpwIvzbtiZwtQagcSAIGqbHG               = r"^\#.*"
            DIVgsidYXxvyCwfomlfYPjfHAhTyNAKc                        = r"\={1}\s*r[\"|\']{1}"
            sFcqgUmfWhUwNVJfaOInHabARGGkfait          = r"[\"|\']{3}.*[\"|\']{3}$"
            DZTFcVafmsPACJAeBMWaYXxPeFKLOOfn    = r"^\s*[\"|\']{3}$"
            UQuScuDxHZsFyIUUGhofDHfYpNuVepbO = r"^\s*[\"|\']{3}\)?\.?"
            eKlvjzpvBEmHFHqzvgHyWBqpxEOvJBLo                   = r".*\={1}\s*\w*\.?\w*[\(|\.]{1}[\"|\']{3}|.*\={1}\s*[\"|\']{3}"
            RihTNsQbfhYcfmBQzCJlExgIBcFjVuUe               = r"\s*\#[^\"|^\'|^\.|^\?|^\*|^\!|^\]|^\[|^\\|^\)|^\(|^\{|^\}].*"
            HElMLRODGzcUKJspthDIppqXbeiaBYrc  = "py"
            KZMnIKVborfggnkNSlyUhxObwRqVmiQC   = r"__pycache__"
        uTWbEuJHoQKKukuwUKwlPkJbhOBZLpjb = [XpFYQbySEDlOOUZqcIJsabBgEtshBdff for XpFYQbySEDlOOUZqcIJsabBgEtshBdff in glob.glob("{0}{1}**{1}*.{2}".format(outputArg, self.SGmfKJIYPdAiXpRFRIYwVAVshNVvUjKN.ghmlWbnPwSwsukFQEkGbUHGEAvsuOsFV(), HElMLRODGzcUKJspthDIppqXbeiaBYrc), recursive=True)]
        for MTSBaDHSzncitwOAvGrlUKOvMfziQwGX in uTWbEuJHoQKKukuwUKwlPkJbhOBZLpjb:
            EVpvPsyVTtcJxqekeNdCKdxNsmXmBuks += 1
        print("\n[+] Running remove commentaries in {0} KnxSmCrKKXfIvfuMBuBUnWesjUiLQKjY(s)...\n".format(EVpvPsyVTtcJxqekeNdCKdxNsmXmBuks))
        with tqdm(total=EVpvPsyVTtcJxqekeNdCKdxNsmXmBuks) as pbar:
            for KnxSmCrKKXfIvfuMBuBUnWesjUiLQKjY in uTWbEuJHoQKKukuwUKwlPkJbhOBZLpjb:
                pbar.update(1)
                if re.match(KZMnIKVborfggnkNSlyUhxObwRqVmiQC, KnxSmCrKKXfIvfuMBuBUnWesjUiLQKjY):
                    continue
                else:
                    with fileinput.input(KnxSmCrKKXfIvfuMBuBUnWesjUiLQKjY, inplace=True) as inputFile:
                        for tswOsnHvEBcXUpNHApCkrgMsnXiSlXdm in inputFile:
                            YkmINZHwEvQoibsCxbdYGkQYlaXOUEvI = re.search(RihTNsQbfhYcfmBQzCJlExgIBcFjVuUe, tswOsnHvEBcXUpNHApCkrgMsnXiSlXdm)
                            qNTmckziBcMncXFKHZppkdYVOohEzlhs = re.search(VyYrBUnurpwIvzbtiZwtQagcSAIGqbHG, tswOsnHvEBcXUpNHApCkrgMsnXiSlXdm)
                            if codeArg == "python":
                                if "coding" in tswOsnHvEBcXUpNHApCkrgMsnXiSlXdm or "#!" in tswOsnHvEBcXUpNHApCkrgMsnXiSlXdm:
                                    print(tswOsnHvEBcXUpNHApCkrgMsnXiSlXdm)
                                    continue
                                if re.match(DIVgsidYXxvyCwfomlfYPjfHAhTyNAKc, tswOsnHvEBcXUpNHApCkrgMsnXiSlXdm):
                                    continue
                                elif re.match(eKlvjzpvBEmHFHqzvgHyWBqpxEOvJBLo, tswOsnHvEBcXUpNHApCkrgMsnXiSlXdm):
                                    qUFBuUDAhulkPLEwnUQODBOmGAsjmUWI += 1
                                elif re.match(DZTFcVafmsPACJAeBMWaYXxPeFKLOOfn, tswOsnHvEBcXUpNHApCkrgMsnXiSlXdm) or re.match(UQuScuDxHZsFyIUUGhofDHfYpNuVepbO, tswOsnHvEBcXUpNHApCkrgMsnXiSlXdm):
                                    zlanKAzCAwPSLqQcHViiyGjzjqGApZWR += 1
                                else:
                                    pass
                                if re.match(sFcqgUmfWhUwNVJfaOInHabARGGkfait, tswOsnHvEBcXUpNHApCkrgMsnXiSlXdm):
                                    yJULBCuEpZDZOyaWqYXWrxGrGqxgLJQP += 1
                                    zlanKAzCAwPSLqQcHViiyGjzjqGApZWR = 0
                                    continue
                                elif zlanKAzCAwPSLqQcHViiyGjzjqGApZWR == 1 and qUFBuUDAhulkPLEwnUQODBOmGAsjmUWI == 0:
                                    yJULBCuEpZDZOyaWqYXWrxGrGqxgLJQP += 1
                                    continue
                                elif zlanKAzCAwPSLqQcHViiyGjzjqGApZWR == 0 and qUFBuUDAhulkPLEwnUQODBOmGAsjmUWI == 1:
                                    print(tswOsnHvEBcXUpNHApCkrgMsnXiSlXdm)
                                    continue
                                elif zlanKAzCAwPSLqQcHViiyGjzjqGApZWR == 2:
                                    yJULBCuEpZDZOyaWqYXWrxGrGqxgLJQP += 1
                                    zlanKAzCAwPSLqQcHViiyGjzjqGApZWR = 0
                                    continue
                                elif zlanKAzCAwPSLqQcHViiyGjzjqGApZWR == 1 and qUFBuUDAhulkPLEwnUQODBOmGAsjmUWI == 1:
                                    zlanKAzCAwPSLqQcHViiyGjzjqGApZWR = 0
                                    qUFBuUDAhulkPLEwnUQODBOmGAsjmUWI = 0
                                    print(tswOsnHvEBcXUpNHApCkrgMsnXiSlXdm)
                                    continue
                                else:
                                    pass
                            if qNTmckziBcMncXFKHZppkdYVOohEzlhs is not None:
                                yJULBCuEpZDZOyaWqYXWrxGrGqxgLJQP += 1
                                tswOsnHvEBcXUpNHApCkrgMsnXiSlXdm = tswOsnHvEBcXUpNHApCkrgMsnXiSlXdm.replace(qNTmckziBcMncXFKHZppkdYVOohEzlhs.group(0), "")
                                print(tswOsnHvEBcXUpNHApCkrgMsnXiSlXdm)
                            elif YkmINZHwEvQoibsCxbdYGkQYlaXOUEvI is not None:
                                tswOsnHvEBcXUpNHApCkrgMsnXiSlXdm = tswOsnHvEBcXUpNHApCkrgMsnXiSlXdm.replace(YkmINZHwEvQoibsCxbdYGkQYlaXOUEvI.group(0), "")
                                yJULBCuEpZDZOyaWqYXWrxGrGqxgLJQP += 1
                                print(tswOsnHvEBcXUpNHApCkrgMsnXiSlXdm)
                            else:
                                print(tswOsnHvEBcXUpNHApCkrgMsnXiSlXdm)
        zlanKAzCAwPSLqQcHViiyGjzjqGApZWR = 0
        qUFBuUDAhulkPLEwnUQODBOmGAsjmUWI = 0
        for KnxSmCrKKXfIvfuMBuBUnWesjUiLQKjY in uTWbEuJHoQKKukuwUKwlPkJbhOBZLpjb:
            bjBAnnRTSHHqTghXpTiBerZzUCAUixVn = 0
            if re.match(KZMnIKVborfggnkNSlyUhxObwRqVmiQC, KnxSmCrKKXfIvfuMBuBUnWesjUiLQKjY):
                continue
            else:
                with open(KnxSmCrKKXfIvfuMBuBUnWesjUiLQKjY, "r") as readFile:
                    bjBAnnRTSHHqTghXpTiBerZzUCAUixVn = 0
                    iDEXUobMjNBqrNlqWoUHoYrsUXidHHKU           = readFile.readlines()
                    for tswOsnHvEBcXUpNHApCkrgMsnXiSlXdm in iDEXUobMjNBqrNlqWoUHoYrsUXidHHKU:
                        YkmINZHwEvQoibsCxbdYGkQYlaXOUEvI = re.search(RihTNsQbfhYcfmBQzCJlExgIBcFjVuUe, tswOsnHvEBcXUpNHApCkrgMsnXiSlXdm)
                        qNTmckziBcMncXFKHZppkdYVOohEzlhs = re.search(VyYrBUnurpwIvzbtiZwtQagcSAIGqbHG, tswOsnHvEBcXUpNHApCkrgMsnXiSlXdm)
                        if codeArg == "python":
                            if "coding" in tswOsnHvEBcXUpNHApCkrgMsnXiSlXdm or "#!" in tswOsnHvEBcXUpNHApCkrgMsnXiSlXdm:
                                continue
                            if re.match(DIVgsidYXxvyCwfomlfYPjfHAhTyNAKc, tswOsnHvEBcXUpNHApCkrgMsnXiSlXdm):
                                continue
                            elif re.match(eKlvjzpvBEmHFHqzvgHyWBqpxEOvJBLo, tswOsnHvEBcXUpNHApCkrgMsnXiSlXdm):
                                qUFBuUDAhulkPLEwnUQODBOmGAsjmUWI += 1
                            elif re.match(DZTFcVafmsPACJAeBMWaYXxPeFKLOOfn, tswOsnHvEBcXUpNHApCkrgMsnXiSlXdm) or re.match(UQuScuDxHZsFyIUUGhofDHfYpNuVepbO, tswOsnHvEBcXUpNHApCkrgMsnXiSlXdm):
                                zlanKAzCAwPSLqQcHViiyGjzjqGApZWR += 1
                            else:
                                pass
                            if re.match(sFcqgUmfWhUwNVJfaOInHabARGGkfait, tswOsnHvEBcXUpNHApCkrgMsnXiSlXdm):
                                zlanKAzCAwPSLqQcHViiyGjzjqGApZWR = 0
                                bjBAnnRTSHHqTghXpTiBerZzUCAUixVn += 1
                                continue
                            elif zlanKAzCAwPSLqQcHViiyGjzjqGApZWR == 1 and qUFBuUDAhulkPLEwnUQODBOmGAsjmUWI == 0:
                                bjBAnnRTSHHqTghXpTiBerZzUCAUixVn += 1
                                continue
                            elif zlanKAzCAwPSLqQcHViiyGjzjqGApZWR == 0 and qUFBuUDAhulkPLEwnUQODBOmGAsjmUWI == 1:
                                continue
                            elif zlanKAzCAwPSLqQcHViiyGjzjqGApZWR == 2:
                                zlanKAzCAwPSLqQcHViiyGjzjqGApZWR = 0
                                bjBAnnRTSHHqTghXpTiBerZzUCAUixVn += 1
                                continue
                            elif zlanKAzCAwPSLqQcHViiyGjzjqGApZWR == 1 and qUFBuUDAhulkPLEwnUQODBOmGAsjmUWI == 1:
                                zlanKAzCAwPSLqQcHViiyGjzjqGApZWR = 0
                                qUFBuUDAhulkPLEwnUQODBOmGAsjmUWI = 0
                                continue
                            else:
                                pass
                        if qNTmckziBcMncXFKHZppkdYVOohEzlhs is not None:
                            bjBAnnRTSHHqTghXpTiBerZzUCAUixVn += 1
                        elif YkmINZHwEvQoibsCxbdYGkQYlaXOUEvI is not None:
                            bjBAnnRTSHHqTghXpTiBerZzUCAUixVn += 1
                        else:
                            pass
        if (fGaAEhoBtKsjlWzGRTOnzHeqjUChGWEb.mfZkOZLuWJEVMClZlQvMPoireraUJIKy(self, codeArg, outputArg) == 0):
            if bjBAnnRTSHHqTghXpTiBerZzUCAUixVn == 0:
                print("\n-> {0} lines of commentaries removed\n".format(yJULBCuEpZDZOyaWqYXWrxGrGqxgLJQP))
                return nUKxRcTMPJDesumjUAPIMORXiDvlnUVJ
            else:
                return IZxoJjnCzvaNBeGxIUOQAGqgqRGXLwlG
        else:
            return IZxoJjnCzvaNBeGxIUOQAGqgqRGXLwlG
    def bodsoWJeIBctoDflVdcJHeFSNfDggYEk(self, codeArg, outputArg):
        ishVfVvkXltyWbUrcWQJDOPNPVoHYYBK              = 0
        gedfyKwrpfOJfHpkBUzxEOCXNKYqOXEf         = 0
        EVpvPsyVTtcJxqekeNdCKdxNsmXmBuks            = 0
        BJCozjTgrWbRiDJzbwWAiEJuzrhYsjTx  = 0
        CfRpMUnSlIkvLkVGqcBaTHUuUhUBItpl  = 0
        if codeArg == "python":
            AQfnEjSSwMPmCmzhgyQEmeMWifwakeGs = r"\s*print"
            HElMLRODGzcUKJspthDIppqXbeiaBYrc  = "py"
            KZMnIKVborfggnkNSlyUhxObwRqVmiQC   = r"__pycache__"
        uTWbEuJHoQKKukuwUKwlPkJbhOBZLpjb = [XpFYQbySEDlOOUZqcIJsabBgEtshBdff for XpFYQbySEDlOOUZqcIJsabBgEtshBdff in glob.glob("{0}{1}**{1}*.{2}".format(outputArg, self.SGmfKJIYPdAiXpRFRIYwVAVshNVvUjKN.ghmlWbnPwSwsukFQEkGbUHGEAvsuOsFV(), HElMLRODGzcUKJspthDIppqXbeiaBYrc), recursive=True)]
        for MTSBaDHSzncitwOAvGrlUKOvMfziQwGX in uTWbEuJHoQKKukuwUKwlPkJbhOBZLpjb:
            EVpvPsyVTtcJxqekeNdCKdxNsmXmBuks += 1
        print("\n[+] Running remove print function in {0} KnxSmCrKKXfIvfuMBuBUnWesjUiLQKjY(s)...\n".format(EVpvPsyVTtcJxqekeNdCKdxNsmXmBuks))
        with tqdm(total=EVpvPsyVTtcJxqekeNdCKdxNsmXmBuks) as pbar:
            for KnxSmCrKKXfIvfuMBuBUnWesjUiLQKjY in uTWbEuJHoQKKukuwUKwlPkJbhOBZLpjb:
                pbar.update(1)
                if re.match(KZMnIKVborfggnkNSlyUhxObwRqVmiQC, KnxSmCrKKXfIvfuMBuBUnWesjUiLQKjY):
                    continue
                else:
                    with fileinput.input(KnxSmCrKKXfIvfuMBuBUnWesjUiLQKjY, inplace=True) as inputFile:
                        for tswOsnHvEBcXUpNHApCkrgMsnXiSlXdm in inputFile:
                            if re.match(AQfnEjSSwMPmCmzhgyQEmeMWifwakeGs, tswOsnHvEBcXUpNHApCkrgMsnXiSlXdm):
                                ishVfVvkXltyWbUrcWQJDOPNPVoHYYBK += 1
                                if re.match(r"\s*print\s*\({1}", tswOsnHvEBcXUpNHApCkrgMsnXiSlXdm):
                                    if "(" in tswOsnHvEBcXUpNHApCkrgMsnXiSlXdm and not ")" in tswOsnHvEBcXUpNHApCkrgMsnXiSlXdm:
                                        BJCozjTgrWbRiDJzbwWAiEJuzrhYsjTx += 1
                                        continue
                                    else:
                                        continue
                                elif re.match(r"\s*print\s*[\"|\']{1}", tswOsnHvEBcXUpNHApCkrgMsnXiSlXdm):
                                    CfRpMUnSlIkvLkVGqcBaTHUuUhUBItpl += 1
                                    continue
                            else:
                                if BJCozjTgrWbRiDJzbwWAiEJuzrhYsjTx == 1:
                                    if ")" in tswOsnHvEBcXUpNHApCkrgMsnXiSlXdm and not "(" in tswOsnHvEBcXUpNHApCkrgMsnXiSlXdm:
                                        BJCozjTgrWbRiDJzbwWAiEJuzrhYsjTx = 0
                                        continue
                                    else:
                                        continue
                                elif CfRpMUnSlIkvLkVGqcBaTHUuUhUBItpl > 0:
                                    if re.match(r"^\s+[\"\']{1}\s*\w+|^[\"\']{1}\s*\w+", tswOsnHvEBcXUpNHApCkrgMsnXiSlXdm):
                                        CfRpMUnSlIkvLkVGqcBaTHUuUhUBItpl += 1
                                        continue
                                    else:
                                        CfRpMUnSlIkvLkVGqcBaTHUuUhUBItpl = 0
                                        print(tswOsnHvEBcXUpNHApCkrgMsnXiSlXdm)
                                        continue
                                else:
                                    print(tswOsnHvEBcXUpNHApCkrgMsnXiSlXdm)
        for KnxSmCrKKXfIvfuMBuBUnWesjUiLQKjY in uTWbEuJHoQKKukuwUKwlPkJbhOBZLpjb:
            if re.match(KZMnIKVborfggnkNSlyUhxObwRqVmiQC, KnxSmCrKKXfIvfuMBuBUnWesjUiLQKjY):
                continue
            else:
                with open(KnxSmCrKKXfIvfuMBuBUnWesjUiLQKjY, "r") as readFile:
                    iDEXUobMjNBqrNlqWoUHoYrsUXidHHKU = readFile.readlines()
                    for tswOsnHvEBcXUpNHApCkrgMsnXiSlXdm in iDEXUobMjNBqrNlqWoUHoYrsUXidHHKU:
                        if re.match(AQfnEjSSwMPmCmzhgyQEmeMWifwakeGs, tswOsnHvEBcXUpNHApCkrgMsnXiSlXdm):
                            gedfyKwrpfOJfHpkBUzxEOCXNKYqOXEf += 1
        if (fGaAEhoBtKsjlWzGRTOnzHeqjUChGWEb.mfZkOZLuWJEVMClZlQvMPoireraUJIKy(self, codeArg, outputArg) == 0):
            if gedfyKwrpfOJfHpkBUzxEOCXNKYqOXEf == 0:
                print("\n-> {0} print functions removed\n".format(ishVfVvkXltyWbUrcWQJDOPNPVoHYYBK))
                return nUKxRcTMPJDesumjUAPIMORXiDvlnUVJ
            else:
                return IZxoJjnCzvaNBeGxIUOQAGqgqRGXLwlG
        else:
            return IZxoJjnCzvaNBeGxIUOQAGqgqRGXLwlG
